<script setup>
import { ref, computed } from 'vue';

// Дистрибутивы
const distros = [
  "Ubuntu", "Debian", "ALT Linux", "RedOS", "PopOS",
  "Arch Linux", "Linux Mint", "OpenSuse", "Fedora Linux"
];

// Начальные баллы (ALT Linux и RedOS получают +2, остальные +1)
const initialScores = [1, 1, 2, 2, 1, 1, 1, 1, 1];

// Вопросы с баллами
const questions = [
  { text: "Какой уровень удобства интерфейса для вас важнее?", options: [
    { text: "Простой и понятный интерфейс", scores: [2, 2, 1, 1, 1, 1, 2, 1, 1] },
    { text: "Гибкий, настраиваемый, с возможностью глубоких настроек", scores: [1, 1, 3, 3, 1, 3, 1, 1, 3] },
    { text: "Удобный для игр, с хорошей графикой", scores: [1, 1, 1, 1, 2, 1, 1, 1, 1] },
    { text: "Неважно, главное – чтобы система была функциональной", scores: [1, 1, 1, 1, 1, 1, 1, 1, 1] }
  ]},
  { text: "Какой тип установки операционной системы вы предпочитаете?", options: [
    { text: "Лёгкую и быструю установку с минимальной настройкой", scores: [2, 2, 1, 1, 1, 1, 2, 1, 1] },
    { text: "Подробную установку с возможностью выбора компонентов", scores: [1, 1, 3, 3, 1, 3, 1, 1, 3] },
    { text: "Установку, оптимизированную для игр и мультимедиа", scores: [1, 1, 1, 1, 2, 1, 1, 1, 1] },
    { text: "Установку, позволяющую детально настроить систему под себя", scores: [1, 1, 3, 3, 1, 3, 1, 1, 3] }
  ]},
  { text: "Какой подход к обновлениям вам больше подходит?", options: [
    { text: "Регулярные обновления с новыми функциями", scores: [1, 1, 3, 3, 1, 3, 1, 1, 3] },
    { text: "Стабильные, проверенные обновления с длительной поддержкой", scores: [3, 3, 1, 1, 1, 1, 3, 3, 1] },
    { text: "Обновления, ориентированные на геймеров, с поддержкой последних драйверов", scores: [1, 1, 1, 1, 2, 1, 1, 1, 1] },
    { text: "Редкие обновления для избежания возможных сбоев", scores: [3, 3, 1, 1, 1, 1, 3, 3, 1] }
  ]},
  { text: "Как вы относитесь к настройке системы вручную?", options: [
    { text: "Предпочитаю максимально автоматизированные процессы", scores: [2, 2, 1, 1, 1, 1, 2, 1, 1] },
    { text: "Готов немного экспериментировать, но нужен базовый комфорт", scores: [1, 1, 2, 2, 1, 2, 1, 1, 2] },
    { text: "Люблю полный контроль и настройку до мельчайших деталей", scores: [1, 1, 3, 3, 1, 3, 1, 1, 3] },
    { text: "Не знаю, что выбрать – мне всё равно", scores: [1, 1, 1, 1, 1, 1, 1, 1, 1] }
  ]},
  { text: "Какой сценарий использования для вас наиболее важен?", options: [
    { text: "Домашнее использование, интернет, просмотр видео", scores: [2, 2, 1, 1, 1, 1, 2, 1, 1] },
    { text: "Работа, офисные задачи, поддержка документов", scores: [2, 2, 1, 1, 1, 1, 2, 2, 1] },
    { text: "Игры, мультимедиа, графика", scores: [1, 1, 1, 1, 2, 1, 1, 1, 1] },
    { text: "Программирование, настройка серверов, эксперименты", scores: [1, 1, 3, 3, 1, 3, 1, 1, 3] }
  ]},
  { text: "Насколько важна для вас безопасность системы?", options: [
    { text: "Очень важна – хочу максимальную защиту", scores: [3, 3, 1, 1, 1, 1, 3, 3, 1] },
    { text: "Важна, но не критична", scores: [2, 2, 2, 2, 2, 2, 2, 2, 2] },
    { text: "Хотелось бы сочетание безопасности с гибкостью настроек", scores: [1, 1, 3, 3, 1, 3, 1, 1, 3] },
    { text: "Не задумывался, главное – удобство использования", scores: [1, 1, 1, 1, 1, 1, 1, 1, 1] }
  ]},
  { text: "Какую среду рабочего стола вы предпочитаете?", options: [
    { text: "Классическую, удобную и интуитивно понятную (например, GNOME или KDE)", scores: [2, 2, 1, 1, 1, 1, 2, 2, 2] },
    { text: "Минималистичную, с возможностью детальной настройки", scores: [1, 1, 3, 3, 1, 3, 1, 1, 3] },
    { text: "Ориентированную на игры, с оптимизацией графики", scores: [1, 1, 1, 1, 2, 1, 1, 1, 1] },
    { text: "Современную, экспериментальную", scores: [1, 1, 3, 3, 1, 3, 1, 1, 3] }
  ]},
  { text: "Какой подход к установке программного обеспечения вы предпочитаете?", options: [
    { text: "Магазин приложений с автоматическим обновлением", scores: [2, 2, 1, 1, 1, 1, 2, 2, 2] },
    { text: "Использование пакетных менеджеров и обширных репозиториев", scores: [1, 1, 3, 3, 1, 3, 1, 1, 3] },
    { text: "Предустановленный набор приложений, готовых к работе", scores: [2, 2, 1, 1, 1, 1, 2, 2, 2] },
    { text: "Установка только нужных программ «с нуля»", scores: [1, 1, 3, 3, 1, 3, 1, 1, 3] }
  ]},
  { text: "Насколько важна для вас скорость работы системы?", options: [
    { text: "Критически важна – хочу, чтобы система работала мгновенно", scores: [1, 1, 3, 3, 2, 3, 1, 1, 3] },
    { text: "Важно, но можно пожертвовать скоростью ради стабильности", scores: [2, 2, 1, 1, 1, 1, 2, 2, 1] },
    { text: "Меня не волнует скорость – главное функциональность", scores: [1, 1, 1, 1, 1, 1, 1, 1, 1] },
    { text: "Оптимизация для игр с приоритетом производительности", scores: [1, 1, 1, 1, 2, 1, 1, 1, 1] }
  ]},
  { text: "Какой приоритет для вас в системе?", options: [
    { text: "Простота и интуитивность использования", scores: [2, 2, 1, 1, 1, 1, 2, 2, 1] },
    { text: "Глубокая настройка и гибкость под свои нужды", scores: [1, 1, 3, 3, 1, 3, 1, 1, 3] },
    { text: "Поддержка игр и мультимедиа", scores: [1, 1, 1, 1, 2, 1, 1, 1, 1] },
    { text: "Баланс между стабильностью и возможностями настройки", scores: [2, 2, 2, 2, 2, 2, 2, 2, 2] }
  ]},
  { text: "Какие обновления системы для вас предпочтительнее?", options: [
    { text: "Частые и инновационные, чтобы всегда быть на передовой", scores: [1, 1, 3, 3, 1, 3, 1, 1, 3] },
    { text: "Проверенные временем, чтобы избежать багов", scores: [3, 3, 1, 1, 1, 1, 3, 3, 1] },
    { text: "Ориентированные на геймерские функции", scores: [1, 1, 1, 1, 2, 1, 1, 1, 1] },
    { text: "Баланс между частыми обновлениями и стабильностью", scores: [2, 2, 2, 2, 2, 2, 2, 2, 2] }
  ]},
  { text: "Насколько важна для вас поддержка сообщества и наличие документации?", options: [
    { text: "Очень важна – хочу быть уверенным в помощи сообщества", scores: [2, 2, 1, 1, 1, 1, 2, 2, 1] },
    { text: "Важна, но я люблю экспериментировать и настраивать систему сам", scores: [1, 1, 3, 3, 1, 3, 1, 1, 3] },
    { text: "Хотелось бы специализированной поддержки для игровых функций", scores: [1, 1, 1, 1, 2, 1, 1, 1, 1] },
    { text: "Не считаю это критичным – я быстро разбираюсь сам", scores: [1, 1, 1, 1, 1, 1, 1, 1, 1] }
  ]},
  { text: "Какой графический интерфейс вам ближе?", options: [
    { text: "Традиционный, понятный, без лишних эффектов", scores: [2, 2, 1, 1, 1, 1, 2, 2, 1] },
    { text: "Современный, с множеством настроек и эффектов", scores: [1, 1, 3, 3, 1, 3, 1, 1, 3] },
    { text: "Интерфейс, оптимизированный для игр и мультимедиа", scores: [1, 1, 1, 1, 2, 1, 1, 1, 1] },
    { text: "Универсальный – баланс простоты и гибкости", scores: [2, 2, 2, 2, 2, 2, 2, 2, 2] }
  ]},
  { text: "Какую систему вы бы выбрали для домашнего использования?", options: [
    { text: "Проверенную временем и стабильную систему", scores: [2, 2, 1, 1, 1, 1, 2, 2, 1] },
    { text: "Систему, которую можно легко настроить под себя", scores: [1, 1, 3, 3, 1, 3, 1, 1, 3] },
    { text: "Систему, оптимизированную для игр и развлечений", scores: [1, 1, 1, 1, 2, 1, 1, 1, 1] },
    { text: "Систему, сочетающую стабильность и гибкость", scores: [2, 2, 2, 2, 1, 2, 2, 2, 2] }
  ]},
  { text: "Как вы предпочитаете устанавливать новые приложения?", options: [
    { text: "Через графический магазин приложений", scores: [2, 2, 1, 1, 1, 1, 2, 2, 2] },
    { text: "С использованием командной строки и пакетных менеджеров", scores: [1, 1, 3, 3, 1, 3, 1, 1, 3] },
    { text: "При помощи сторонних установщиков, если они оптимизированы для игр", scores: [1, 1, 1, 1, 2, 1, 1, 1, 1] },
    { text: "Любым удобным способом – главное, чтобы было быстро", scores: [1, 1, 1, 1, 1, 1, 1, 1, 1] }
  ]},
  { text: "Какую документацию вы предпочитаете?", options: [
    { text: "Подробную, с пошаговыми инструкциями для новичков", scores: [2, 2, 1, 1, 1, 1, 2, 2, 1] },
    { text: "Минималистичную, чтобы самому разбираться в тонкостях", scores: [1, 1, 3, 3, 1, 3, 1, 1, 3] },
    { text: "Документацию, ориентированную на геймеров и развлечения", scores: [1, 1, 1, 1, 2, 1, 1, 1, 1] },
    { text: "Сбалансированную, с теорией и практическими примерами", scores: [2, 2, 2, 2, 2, 2, 2, 2, 2] }
  ]},
  { text: "Насколько важна для вас интеграция с облачными сервисами?", options: [
    { text: "Очень важна – хочу работать в облаке", scores: [2, 2, 1, 1, 1, 1, 2, 2, 1] },
    { text: "Важна, но главное – локальное управление", scores: [1, 1, 3, 3, 1, 3, 1, 1, 3] },
    { text: "Для игр приоритет – поддержка онлайн-сервисов", scores: [1, 1, 1, 1, 2, 1, 1, 1, 1] },
    { text: "Не думаю об этом, для меня важна базовая функциональность", scores: [1, 1, 1, 1, 1, 1, 1, 1, 1] }
  ]},
  { text: "Какой тип загрузчика вам больше нравится?", options: [
    { text: "Простой и интуитивно понятный", scores: [2, 2, 1, 1, 1, 1, 2, 2, 1] },
    { text: "С множеством опций для продвинутых пользователей", scores: [1, 1, 3, 3, 1, 3, 1, 1, 3] },
    { text: "Оптимизированный для быстрой загрузки игр", scores: [1, 1, 1, 1, 2, 1, 1, 1, 1] },
    { text: "Неважно, лишь бы система запускалась", scores: [1, 1, 1, 1, 1, 1, 1, 1, 1] }
  ]},
  { text: "Какие возможности работы с медиа для вас важны?", options: [
    { text: "Просмотр видео, музыка, легкий фоновый процесс", scores: [2, 2, 1, 1, 1, 1, 2, 2, 1] },
    { text: "Редактирование фото и видео с детальной настройкой", scores: [1, 1, 3, 3, 1, 3, 1, 1, 3] },
    { text: "Игра в современные игры с высоким FPS", scores: [1, 1, 1, 1, 2, 1, 1, 1, 1] },
    { text: "Баланс между медиа и производительностью", scores: [2, 2, 2, 2, 1, 2, 2, 2, 2] }
  ]},
  { text: "Какой тип поддержки для вас предпочтительнее?", options: [
    { text: "Большое и активное сообщество", scores: [2, 2, 1, 1, 1, 1, 2, 2, 1] },
    { text: "Небольшое, но профессиональное и сфокусированное", scores: [1, 1, 3, 3, 1, 3, 1, 1, 3] },
    { text: "Сообщество, ориентированное на геймеров и развлечения", scores: [1, 1, 1, 1, 2, 1, 1, 1, 1] },
    { text: "Мне не важна поддержка – я справлюсь сам", scores: [1, 1, 1, 1, 1, 1, 1, 1, 1] }
  ]},
  { text: "Насколько важна для вас гибкость системы в настройках?", options: [
    { text: "Не особо – главное, чтобы система работала «из коробки»", scores: [2, 2, 1, 1, 1, 1, 2, 2, 1] },
    { text: "Очень важна – хочу полностью контролировать каждую деталь", scores: [1, 1, 3, 3, 1, 3, 1, 1, 3] },
    { text: "Гибкость с удобными предустановками для игр", scores: [1, 1, 1, 1, 2, 1, 1, 1, 1] },
    { text: "Баланс между удобством и настройками", scores: [2, 2, 2, 2, 2, 2, 2, 2, 2] }
  ]},
  { text: "Какой тип программ для работы вы предпочитаете?", options: [
    { text: "Офисные программы и базовые утилиты", scores: [2, 2, 1, 1, 1, 1, 2, 2, 1] },
    { text: "Специализированное ПО для разработки и экспериментов", scores: [1, 1, 3, 3, 1, 3, 1, 1, 3] },
    { text: "Программы, оптимизированные для игр и мультимедиа", scores: [1, 1, 1, 1, 2, 1, 1, 1, 1] },
    { text: "Сбалансированный набор для любых задач", scores: [2, 2, 2, 2, 2, 2, 2, 2, 2] }
  ]},
  { text: "Насколько важна поддержка драйверов для вашего оборудования?", options: [
    { text: "Критически важна – хочу, чтобы всё работало сразу", scores: [2, 2, 1, 1, 1, 1, 2, 2, 1] },
    { text: "Важна, но готов настраивать драйверы самостоятельно", scores: [1, 1, 3, 3, 1, 3, 1, 1, 3] },
    { text: "Особенно для игр – драйверы должны быть свежими", scores: [1, 1, 1, 1, 2, 1, 1, 1, 1] },
    { text: "Не особо – главное, чтобы система была функциональной", scores: [1, 1, 1, 1, 1, 1, 1, 1, 1] }
  ]},
  { text: "Что для вас важнее: стабильность или актуальность ПО?", options: [
    { text: "Стабильность превыше всего", scores: [3, 3, 1, 1, 1, 1, 3, 3, 1] },
    { text: "Новизна и актуальные пакеты важнее", scores: [1, 1, 3, 3, 1, 3, 1, 1, 3] },
    { text: "Для игр важна актуальность драйверов и ПО", scores: [1, 1, 1, 1, 2, 1, 1, 1, 1] },
    { text: "Баланс между стабильностью и новизной", scores: [2, 2, 2, 2, 2, 2, 2, 2, 2] }
  ]},
  { text: "Как вы относитесь к командной строке?", options: [
    { text: "Предпочитаю графический интерфейс – командная строка не для меня", scores: [2, 2, 1, 1, 1, 1, 2, 2, 1] },
    { text: "Готов использовать командную строку для ускорения работы", scores: [1, 1, 3, 3, 1, 3, 1, 1, 3] },
    { text: "Командная строка особенно полезна для геймерских оптимизаций", scores: [1, 1, 1, 1, 2, 1, 1, 1, 1] },
    { text: "Люблю и графику, и командную строку – хочу иметь выбор", scores: [2, 2, 2, 2, 2, 2, 2, 2, 2] }
  ]},
  { text: "Насколько важна для вас кастомизация рабочего окружения?", options: [
    { text: "Не особо – мне важна простота и удобство", scores: [2, 2, 1, 1, 1, 1, 2, 2, 1] },
    { text: "Очень важна – я хочу настраивать всё под себя", scores: [1, 1, 3, 3, 1, 3, 1, 1, 3] },
    { text: "Хотелось бы, чтобы интерфейс поддерживал игровые моды", scores: [1, 1, 1, 1, 2, 1, 1, 1, 1] },
    { text: "Баланс между стандартными настройками и возможностью кастомизации", scores: [2, 2, 2, 2, 2, 2, 2, 2, 2] }
  ]},
  { text: "Какой тип загрузки системы вы предпочитаете?", options: [
    { text: "Быстрая загрузка с минимальными задержками", scores: [1, 1, 3, 3, 2, 3, 1, 1, 3] },
    { text: "Загрузчик с подробными опциями для продвинутых пользователей", scores: [1, 1, 3, 3, 1, 3, 1, 1, 3] },
    { text: "Оптимизирован для быстрого запуска игр и приложений", scores: [1, 1, 1, 1, 2, 1, 1, 1, 1] },
    { text: "Неважно, лишь бы система быстро запускалась", scores: [1, 1, 1, 1, 1, 1, 1, 1, 1] }
  ]},
  { text: "Какой подход к обновлению ядра системы вы предпочитаете?", options: [
    { text: "Использовать стабильное и проверенное ядро", scores: [3, 3, 1, 1, 1, 1, 3, 3, 1] },
    { text: "Постоянно получать последние обновления ядра для экспериментов", scores: [1, 1, 3, 3, 1, 3, 1, 1, 3] },
    { text: "Для игр важно, чтобы ядро поддерживало новейшие драйверы", scores: [1, 1, 1, 1, 2, 1, 1, 1, 1] },
    { text: "Баланс между стабильностью и новизной ядра", scores: [2, 2, 2, 2, 2, 2, 2, 2, 2] }
  ]},
  { text: "Насколько важна для вас поддержка современных технологий?", options: [
    { text: "Очень важна – хочу использовать новейшие разработки", scores: [1, 1, 3, 3, 1, 3, 1, 1, 3] },
    { text: "Важно, но стабильность важнее новых функций", scores: [3, 3, 1, 1, 1, 1, 3, 3, 1] },
    { text: "Для игр – поддержка новейших технологий критична", scores: [1, 1, 1, 1, 2, 1, 1, 1, 1] },
    { text: "Не особо – главное, чтобы система была функциональной", scores: [1, 1, 1, 1, 1, 1, 1, 1, 1] }
  ]},
  { text: "Какая операционная система больше соответствует вашему мировоззрению?", options: [
    { text: "Ориентированная на стабильность и удобство повседневного использования", scores: [2, 2, 1, 1, 1, 1, 2, 2, 1] },
    { text: "Та, что позволяет экспериментировать и настраивать каждый компонент", scores: [1, 1, 3, 3, 1, 3, 1, 1, 3] },
    { text: "Оптимизированная для игр и развлечений", scores: [1, 1, 1, 1, 2, 1, 1, 1, 1] },
    { text: "Сочетающая стабильность, гибкость и инновации", scores: [2, 2, 3, 3, 1, 3, 2, 2, 3] }
  ]}
];

// Ответы пользователя
const userAnswers = ref(Array(questions.length).fill(null));

// Подсчет баллов
const scores = computed(() => {
  const result = [...initialScores]; // Начальные баллы
  userAnswers.value.forEach((answer, index) => {
    if (answer !== null) {
      questions[index].options[answer].scores.forEach((score, i) => {
        result[i] += score;
      });
    }
  });
  return result;
});

// Определение победителя
const sortedDistros = computed(() => {
  return distros
    .map((distro, index) => ({ name: distro, score: scores.value[index] }))
    .sort((a, b) => b.score - a.score);
});

// Топ-1 или топ-2 дистрибутива
const topDistros = computed(() => {
  const top = sortedDistros.value.filter((distro, index, array) => distro.score === array[0].score);
  return top.slice(0, 2); // Возвращаем максимум два дистрибутива
});

// Проверка, завершен ли тест
const isTestCompleted = computed(() => userAnswers.value.every(a => a !== null));
</script>

<template>
  <div class="quiz-container">

    <div v-for="(q, index) in questions" :key="index" class="question">
      <p><strong>{{ index + 1 }}. {{ q.text }}</strong></p>
      <div class="options">
        <label v-for="(option, optIndex) in q.options" :key="optIndex">
          <input type="radio" :name="'q' + index" :value="optIndex" v-model="userAnswers[index]" />
          {{ option.text }}
        </label>
      </div>
    </div>

    <button @click="userAnswers.fill(null)">Сбросить тест</button>

    <div v-if="isTestCompleted" class="results">
      <h3>🎉 Ваши результаты:</h3>
      <p><strong>Рекомендуемые дистрибутивы:</strong></p>
      <ul>
        <li v-for="distro in topDistros" :key="distro.name">
          <strong>⭐ {{ distro.name }} — {{ distro.score }} баллов</strong>
        </li>
      </ul>
      <p>Остальные дистрибутивы:</p>
      <ul>
        <li v-for="distro in sortedDistros" :key="distro.name">
          <span v-if="!topDistros.includes(distro)">{{ distro.name }} — {{ distro.score }} баллов</span>
        </li>
      </ul>
    </div>
  </div>
</template>

<style scoped>
.quiz-container {
  background: var(--vp-c-bg, #ffffff);
  color: var(--vp-c-text-1, #000000);
  padding: 20px;
  border-radius: 8px;
  box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
  max-width: 600px;
  margin: auto;
}

.question {
  margin-bottom: 15px;
}

.options label {
  display: block;
  padding: 5px;
  cursor: pointer;
}

.options input {
  margin-right: 8px;
}

button {
  background: var(--vp-c-brand, #007bff);
  color: white;
  padding: 10px 15px;
  border: none;
  border-radius: 5px;
  cursor: pointer;
  transition: 0.3s;
}

button:hover {
  background: var(--vp-c-brand-dark, #0056b3);
}

.results {
  margin-top: 15px;
  padding: 0;
}

.results ul {
  padding: 0;
}

.results li {
  list-style: none;
  font-size: 1.1em;
  margin: 5px 0;
}

.results strong {
  color: var(--vp-c-brand, #007bff);
}
</style>
